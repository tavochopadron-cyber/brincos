# -*- coding: utf-8 -*-
"""PP.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1c-S1w539cexivB1xjxWrxnvHNowJhtfR
"""

# -*- coding: utf-8 -*-
"""Nuevo c√≥digo del pp - Versi√≥n con selecci√≥n de puesto"""

import base64
import random
import os

# --- 1. CONFIGURACI√ìN DE PAR√ÅMETROS ---
NUM_PREGUNTAS_TECNICAS = 12
NUM_PREGUNTAS_BLANDAS = 13
PUNTAJE_MINIMO_BLANDAS = 0.75  # 75%

# ---------------- RSA SIMULADO ---------------------
def generar_clave_rsa_simulada():
    return base64.b64encode(os.urandom(16)).decode("utf-8")

def cifrar_rsa_simulado(datos, clave_publica):
    datos_codificados = base64.b64encode(datos.encode("utf-8")).decode("utf-8")
    return f"RSA-CIPHER:{clave_publica[:10]}...{datos_codificados}"

# --- 2. PREGUNTAS DEL CUESTIONARIO ---
PREGUNTAS_TECNICAS = [
    "¬øSabe realizar inventarios f√≠sicos y conteos r√°pidos de material de construcci√≥n?",
    "¬øHa utilizado alg√∫n software de Punto de Venta (POS) o sistema de facturaci√≥n electr√≥nica?",
    "¬øSabe leer e interpretar una hoja de ruta o usar GPS para optimizar entregas?",
    "¬øTiene experiencia o conoce el manejo b√°sico de un montacargas o pat√≠n hidr√°ulico?",
    "¬øPuede identificar y diferenciar los tipos de cemento, varilla y arena comunes en la construcci√≥n?",
    "¬øSabe c√≥mo se calcula el volumen o √°rea de un material (ej. m¬≥ de arena, m¬≤ de loseta)?",
    "¬øSe siente c√≥modo manejando una terminal bancaria y realizando cobros con tarjeta?",
    "¬øPuede verificar y cotejar una orden de compra contra el material f√≠sico que se va a cargar?",
    "¬øConoce las normas b√°sicas de seguridad para cargar y descargar materiales pesados?",
    "¬øTiene conocimientos b√°sicos de uso de hojas de c√°lculo (Excel, Google Sheets) para reportes?",
    "¬øSabe realizar el mantenimiento b√°sico o limpieza de herramientas y equipos de trabajo?",
    "¬øPuede calcular r√°pidamente el cambio para un pago en efectivo?"
]

PREGUNTAS_BLANDAS = [
    "¬øMantiene la calma y es cort√©s al tratar con un cliente enojado o impaciente?",
    "¬øSe adapta f√°cilmente a los cambios de tareas o prioridades de √∫ltima hora?",
    "¬øOfrece ayuda a sus compa√±eros sin que se lo pidan?",
    "¬øEs puntual y respeta estrictamente los horarios?",
    "¬øAcepta retroalimentaci√≥n sin ponerse a la defensiva?",
    "¬øSe enfoca en soluciones en lugar de culpar a otros?",
    "¬øEs proactivo buscando tareas pendientes?",
    "¬øSe comunica de manera clara y concisa?",
    "¬øTrabaja bien bajo presi√≥n?",
    "¬øSu honestidad y √©tica son inquebrantables?",
    "¬øPrioriza la seguridad ante todo?",
    "¬øPropone mejoras a procesos ineficientes?",
    "¬øSe siente c√≥modo pidiendo al cliente verificar la carga/ticket?"
]

# --- ASIGNACI√ìN DE √ÅREA ---
def asignar_area(respuestas):
    """
    Recibe lista de S/N del cuestionario t√©cnico y asigna √°rea laboral.
    """

    AREAS = {
        "CARGADOR":       [0, 3, 4, 7, 8],
        "VENTAS/COBRANZA":[1, 6, 11],
        "REPARTIDOR":     [2, 3, 7, 8],
        "LIMPIEZA":       [10],
        "ADMINISTRATIVO": [9]
    }

    conteo = {area: 0 for area in AREAS}

    for area, indices in AREAS.items():
        for idx in indices:
            if respuestas[idx] == "S":
                conteo[area] += 1

    area_final = max(conteo, key=conteo.get)
    return area_final

# üîµ --- NUEVO: SELECCI√ìN DE PUESTO DESEADO ---
def seleccionar_area_deseada():
    print("\n--- SELECCIONA EL PUESTO AL QUE DESEAS APLICAR ---")
    print("1. CARGADOR")
    print("2. VENTAS/COBRANZA")
    print("3. REPARTIDOR")
    print("4. LIMPIEZA")
    print("5. ADMINISTRATIVO")

    opciones = {
        "1": "CARGADOR",
        "2": "VENTAS/COBRANZA",
        "3": "REPARTIDOR",
        "4": "LIMPIEZA",
        "5": "ADMINISTRATIVO"
    }

    while True:
        eleccion = input("Elige una opci√≥n (1-5): ").strip()
        if eleccion in opciones:
            return opciones[eleccion]
        print("Opci√≥n no v√°lida. Intenta nuevamente.")

# --- 3. FUNCIONES PRINCIPALES ---
def pedir_datos_personales():
    datos = {}
    print("---  DATOS PERSONALES ---")
    datos["nombre"] = input("Nombre completo: ").strip()
    datos["edad"] = input("Edad: ").strip()
    datos["sexo"] = input("Sexo (M/F/Otro): ").strip()
    datos["correo"] = input("Correo electr√≥nico (Ser√° cifrado): ").strip()
    datos["telefono"] = input("N√∫mero de tel√©fono (Ser√° cifrado): ").strip()
    return datos

def realizar_cuestionario(preguntas, tipo):
    respuestas = []
    puntaje = 0

    print(f"\n---  HABILIDADES {tipo.upper()} ({len(preguntas)} preguntas) ---")
    for i, pregunta in enumerate(preguntas):
        while True:
            r = input(f"{i+1}. {pregunta} (S/N): ").upper().strip()
            if r in ("S", "N"):
                respuestas.append(r)
                if r == "S":
                    puntaje += 1
                break
            print(" Respuesta no v√°lida. Solo S o N.")
    return puntaje, respuestas

def evaluar_resultados(pt_tecnico, pt_blando):
    porcentaje_tecnico = (pt_tecnico / NUM_PREGUNTAS_TECNICAS) * 100
    porcentaje_blando = (pt_blando / NUM_PREGUNTAS_BLANDAS) * 100
    es_aceptado = porcentaje_blando >= (PUNTAJE_MINIMO_BLANDAS * 100)
    return es_aceptado, porcentaje_tecnico, porcentaje_blando

# --- 4. EJECUCI√ìN PRINCIPAL ---
def iniciar_proceso_seleccion():
    print("=====================================================")
    print("     PROCESO DE SELECCI√ìN - BRICOS")
    print("=====================================================")

    datos_usuario = pedir_datos_personales()

    # üîµ Nuevo: seleccionar puesto
    area_deseada = seleccionar_area_deseada()

    # Cifrado RSA simulado
    clave_publica = generar_clave_rsa_simulada()
    datos_cifrados = cifrar_rsa_simulado(
        f"Email:{datos_usuario['correo']}|Tel:{datos_usuario['telefono']}",
        clave_publica
    )
    print("\nDatos de contacto CIFRADOS correctamente.")

    # Cuestionarios
    pt_tecnico, respuestas_tecnicas = realizar_cuestionario(PREGUNTAS_TECNICAS, "T√âCNICAS")
    pt_blando, _ = realizar_cuestionario(PREGUNTAS_BLANDAS, "BLANDAS")

    # Evaluaci√≥n
    es_aceptado, pct_tecnico, pct_blando = evaluar_resultados(pt_tecnico, pt_blando)

    # Asignaci√≥n de √°rea
    area = asignar_area(respuestas_tecnicas)

    # Resultados
    print("\n=====================================================")
    print("              RESULTADO FINAL")
    print("=====================================================")
    print(f"Habilidades T√©cnicas: {pt_tecnico}/{NUM_PREGUNTAS_TECNICAS} ({pct_tecnico:.2f}%)")
    print(f"Habilidades Blandas:  {pt_blando}/{NUM_PREGUNTAS_BLANDAS} ({pct_blando:.2f}%)")
    print("-----------------------------------------------------")

    if es_aceptado:
        print(" ESTADO FINAL: ¬°ACEPTADO! (Cumple el 75% en habilidades blandas)")
    else:
        print(" ESTADO FINAL: NO ACEPTADO (No cumple el 75% en habilidades blandas)")

    print(f"\n√Årea recomendada seg√∫n habilidades t√©cnicas: {area}")
    print(f"Puesto deseado por el candidato: {area_deseada}")

    if area == area_deseada:
        print("‚úî Coincide el √°rea deseada con las habilidades evaluadas.")
    else:
        print("‚úñ El √°rea deseada NO coincide con el √°rea recomendada.")

    print("\n=====================================================")
    print("--- REGISTRO GUARDADO ---")
    print(f"Nombre: {datos_usuario['nombre']} | Edad: {datos_usuario['edad']}")
    print(f"DATOS CIFRADOS: {datos_cifrados}")

# Ejecutar
if __name__ == "__main__":
    iniciar_proceso_seleccion()